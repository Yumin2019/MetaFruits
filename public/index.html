<!DOCTYPE html>
<html>
  <head>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser-matter-collision-plugin"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="/index.js"></script>
  </head>

  <style>
    #game-root {
      position: relative;
    }

    /* ì±„íŒ… ì „ì²´ ì˜ì—­ */
    .msger {
      display: flex;
      flex-flow: column wrap;
      justify-content: space-between;
      width: 304px;
      height: 300px;
      border: var(--border);
      border-radius: 5px;
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 0 15px 15px -5px rgba(0, 0, 0, 0.2);
      left: 24px;
      bottom: 16px;
      position: absolute;
      z-index: 100;
    }

    /* ì±„íŒ… ì˜ì—­ style */
    .msger-chat {
      overflow: auto;
      height: 239px;
    }

    /* ì±„íŒ… ì˜ì–µ scrollbar */
    .msger-chat::-webkit-scrollbar {
      width: 10px;
    }

    .msger-chat::-webkit-scrollbar-thumb {
      background-color: rgb(162, 162, 162);
      border-radius: 10px;
      background-clip: padding-box;
      border: 2px solid transparent;
    }

    .msger-chat::-webkit-scrollbar-track {
      background-color: rgb(207, 207, 207);
      border-radius: 10px;
      box-shadow: inset 0px 0px 5px white;
    }

    /* ì±„íŒ… text style */
    .msger-text {
      padding: 4px 8px;
      max-width: 304px;
      font-size: 14px;
      word-break: break-all;
    }

    /* ì…ë ¥ í•˜ëŠ” ê³µê°„ container */
    .msger-inputarea {
      display: flex;
      padding: 10px;
      border-top: var(--border);
      background: #eee;
    }

    .msger-inputarea * {
      padding: 10px;
      border: none;
      border-radius: 3px;
      font-size: 1em;
    }

    .msger-input {
      flex: 1;
      background: #ddd;
    }

    .msger-change-btn {
      margin-right: 10px;
      background: rgb(0, 200, 255);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.23s;
    }

    .msger-change-btn:hover {
      background: rgb(0, 145, 255);
    }

    /* ë‹«ê¸° ë²„íŠ¼ */
    .close {
      width: 28px;
      height: 28px;
      position: absolute;
      right: 0px;
    }
  </style>

  <style>
    /* ì¢Œì¸¡ í•˜ë‹¨ floating ë²„íŠ¼ */
    .chatting-enable button {
      background-color: #48abe0;
      color: white;
      border: none;
      padding: 5px;
      font-size: 32px;
      height: 64px;
      width: 64px;
      box-shadow: 0 2px 4px darkslategray;
      cursor: pointer;
      transition: all 0.2s ease;
      border-radius: 70%;
    }

    .chatting-enable button:active {
      background-color: rgb(37, 170, 242);
      box-shadow: 0 0 2px darkslategray;
      transform: translateY(2px);
    }

    /* ì±„íŒ… í™œì„±í™” ë²„íŠ¼ */
    .chatting-floating {
      left: 32px;
      bottom: 24px;
      position: absolute;
      z-index: 100;
    }

    /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë ¨ CSS */
    .controller {
      background-color: #c2c2c2;
      color: white;
      border: none;
      padding: 5px;
      height: 48px;
      width: 462px;
      cursor: pointer;
      position: absolute;
      box-shadow: 0 2px 4px darkslategray;
      border-radius: 64px;
      left: calc(50% - 215px);
      bottom: 24px;
    }

    .controller-charactor {
      font-size: 32px;
      position: absolute;
      left: 32px;
    }

    .controller-charactor:hover {
      background-color: #ffffff;
      border-radius: 40%;
      padding: 2px;
    }

    .controller-text {
      font-size: 22px;
      color: black;
      position: absolute;
      text-align: center;
      top: 14px;
      left: 96px;
      right: 288px;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .controller-text:hover {
      background-color: #ffffff;
      border-radius: 16px;
    }

    .controller-camera {
      width: 43px;
      height: 43px;
      position: absolute;
      right: 224px;
      font-size: 32px;
    }

    .controller-camera:hover {
      background-color: #ffffff;
      border-radius: 40%;
      padding: 2px;
    }

    .controller-camera-status {
      width: 43px;
      height: 43px;
      position: absolute;
      right: 224px;
      font-size: 32px;
      pointer-events: none;
    }

    .controller-mike {
      width: 43px;
      height: 43px;
      position: absolute;
      right: 160px;
      font-size: 32px;
    }

    .controller-mike:hover {
      background-color: #ffffff;
      border-radius: 40%;
      padding: 2px;
    }

    .controller-mike-status {
      width: 43px;
      height: 43px;
      position: absolute;
      right: 160px;
      font-size: 32px;
      pointer-events: none;
    }

    .controller-setting {
      width: 43px;
      height: 43px;
      position: absolute;
      right: 96px;
      font-size: 32px;
    }

    .controller-setting:hover {
      background-color: #ffffff;
      border-radius: 40%;
      padding: 2px;
    }

    .controller-minimap {
      width: 43px;
      height: 43px;
      position: absolute;
      right: 32px;
      font-size: 32px;
    }

    .controller-minimap:hover {
      background-color: #ffffff;
      border-radius: 40%;
      padding: 2px;
    }

    /* NameDialog ê´€ë ¨ CSS */
    .nameDialog {
      position: absolute;
      top: 45%;
      width: 200px;
      height: fit-content;
      border-radius: 20px;
      border-color: #48abe0;
    }

    .nameDialog-close {
      width: 28px;
      height: 28px;
      position: absolute;
      right: 8px;
    }

    /* Video ê´€ë ¨ CSS  */
    .video-parent {
      display: table;
      width: 100%;
      position: absolute;
      top: 0px;
    }

    .video-parent-inner {
      display: table-cell;
      text-align: center;
      vertical-align: middle;
    }

    .video-parent-content {
      display: inline-block;
    }

    .video-div {
      text-align: center;
      float: left;
      width: 180px;
      height: 120px;
      border-radius: 16px;
      background-color: white;
      /* border: 0.5px solid grey; */
      border: 4px solid #48abe0;
      margin: 8px;
    }

    .video {
      border-radius: 8px;
      width: 100%;
      height: 100%;
    }

    .video-status {
      position: relative;
      bottom: -8px;
      border-radius: 16px;
      background-color: rgba(255, 255, 255, 0.7);
      font-size: 20px;
    }

    /* DeviceDialog ê´€ë ¨ CSS */
    .deviceDialog {
      position: absolute;
      top: 35%;
      width: 500px;
      height: fit-content;
      border-radius: 20px;
      border-color: #48abe0;
    }

    .deviceDialog-close {
      width: 28px;
      height: 28px;
      position: absolute;
      right: 8px;
    }

    /* ë“œë¡­ë‹¤ìš´ */
    /* Dropdown Button */
    .dropbtn {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      background-color: rgb(240, 240, 240);
      width: 430px;
      border-radius: 8px;
      border: 1px solid black;
      padding: 4px;
      font-size: 20px;
      cursor: pointer;
      position: relative;
    }

    /* The container <div> - needed to position the dropdown content */
    .dropdown {
      position: relative;
      display: inline-block;
    }

    /* Dropdown Content (Hidden by Default) */
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: white;
      margin-left: 55px;
      width: 430px;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      z-index: 1;
    }

    /* Links inside the dropdown */
    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    /* Change color of dropdown links on hover */
    .dropdown-content a:hover {
      background-color: #ddd;
    }

    /* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
    .show {
      display: block;
    }
  </style>

  <body id="game-root">
    <!-- WebRTC ì˜ìƒ ì¶œë ¥ ë¦¬ìŠ¤íŠ¸ -->
    <div class="video-parent">
      <div class="video-parent-inner">
        <div class="video-parent-content">
          <!-- <div class="video-div">
            <video class="video"></video>
            <div class="video-status">cam: âŒ mike: âœ”ï¸</div>
          </div> -->
        </div>
      </div>
    </div>

    <!-- ì¥ì¹˜ ì„¤ì • Dialog -->
    <dialog id="deviceDialog" class="deviceDialog">
      <form method="dialog">
        <button id="deviceDialog-close" class="deviceDialog-close">X</button>
      </form>
      <h2>ì¥ì¹˜ ì„¤ì •</h2>

      <div class="dropdown">
        <!-- ì¹´ë©”ë¼ row -->
        <div style="font-size: 32px; position: absolute; top: -6px; left: 0px">
          ğŸ“·
        </div>
        <div
          id="cameraDropdownDiv"
          class="dropbtn"
          style="left: 50px; top: 0px"
        >
          ì¹´ë©”ë¼ ë©”ë‰´
        </div>
        <div id="cameraDropdown" class="dropdown-content">
          <a href="#">ì¹´ë©”ë¼ 1</a>
          <a href="#">ì¹´ë©”ë¼ 2</a>
          <a href="#">ì¹´ë©”ë¼ 3</a>
        </div>

        <!-- ë§ˆì´í¬ row -->
        <div style="font-size: 32px; position: absolute; top: 37px; left: 0px">
          ğŸ¤
        </div>
        <div id="mikeDropdownDiv" class="dropbtn" style="left: 50px; top: 8px">
          ë§ˆì´í¬ ë©”ë‰´
        </div>
        <div
          id="mikeDropdown"
          class="dropdown-content"
          style="margin-top: 10px"
        >
          <a href="#">ë§ˆì´í¬ 1</a>
        </div>

        <!-- ìŠ¤í”¼ì»¤ row -->
        <div style="font-size: 32px; position: absolute; top: 80px; left: 0px">
          ğŸ”Š
        </div>
        <div
          id="speakerDropdownDiv"
          class="dropbtn"
          style="left: 50px; top: 16px"
        >
          ìŠ¤í”¼ì»¤ ë©”ë‰´
        </div>
        <div
          id="speakerDropdown"
          class="dropdown-content"
          style="margin-top: 20px"
        >
          <a href="#">ìŠ¤í”¼ì»¤ 1</a>
        </div>
      </div>

      <div style="font-size: 24px; margin: 32px 0px">
        ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦ğŸŸ¦â¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
      </div>

      <button style="position: absolute; right: 32px; top: 240px">
        ë§ˆì´í¬ í…ŒìŠ¤íŠ¸
      </button>

      <form method="dialog">
        <button id="deviceDialog-ok" style="width: 100%">í™•ì¸</button>
      </form>
    </dialog>

    <!-- ì´ë¦„ ë³€ê²½ Dialog  -->
    <dialog id="nameDialog" class="nameDialog">
      <form method="dialog">
        <button id="nameDialog-close" class="nameDialog-close">X</button>
      </form>
      <h2>ë‹‰ë„¤ì„ ë³€ê²½</h2>
      <input
        id="nameDialog-input"
        type="text"
        placeholder="Enter your name(max: 6)"
        maxlength="6"
        style="margin-bottom: 16px; width: 100%"
      />
      <form method="dialog">
        <button id="nameDialog-ok" style="width: 100%">í™•ì¸</button>
      </form>
    </dialog>

    <!-- ì±„íŒ… í™œì„±í™” ë²„íŠ¼ -->
    <div class="chatting-enable">
      <button id="chatting-open" class="chatting-floating">ğŸ’¬</button>
    </div>
    <div class="controller">
      <!-- ğŸğŸ“ğŸ‰ğŸğŸŠğŸ‹ -->
      <div id="character-button" class="controller-charactor"></div>
      <div id="name-button" class="controller-text">Name</div>
      <div id="camera-button" class="controller-camera">ğŸ“·</div>
      <div id="mike-button" class="controller-mike">ğŸ¤</div>
      <div id="setting-button" class="controller-setting">âš™ï¸</div>
      <div id="minimap-button" class="controller-minimap">ğŸ—ºï¸</div>
      <div id="camera-status" class="controller-camera-status">âŒ</div>
      <div id="mike-status" class="controller-mike-status">âŒ</div>
    </div>

    <!-- ì±„íŒ… ì˜ì—­  -->
    <section id="chatting-container" class="msger">
      <button id="chatting-close" class="close">X</button>
      <div id="chatting-list" class="msger-chat"></div>
      <div id="chatting-form" class="msger-inputarea">
        <button id="chatting-channel" class="msger-change-btn">ì „ì²´</button>
        <input
          id="chatting-input"
          type="text"
          class="msger-input"
          placeholder="Enter your message..."
        />
      </div>
    </section>
  </body>
</html>
